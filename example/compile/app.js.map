{"version":3,"file":"app.js","names":["App","quill","React","useRef","useState","delta","setDelta","title","setTitle","initContent","getQuill","quillIns","current","quillChange","old","source","console","log","JSON","stringify","getContents","window","quillReactCommercial","RichTextEditor","table","codeHighlight","imageHandler","imgUploadApi","formData","request","apiURL","ajaxFormPostOptions","then","response","url","uploadFailCB","error","arg","placeholder","onChange","value","background","height","domContainer","document","querySelector","root","ReactDOM","createRoot","render"],"sources":["../app.js"],"sourcesContent":["const App = () => {\n  const quill = React.useRef({});\n  const [delta, setDelta] = React.useState('');\n  const [title, setTitle] = React.useState('1234');\n  const initContent = '';\n  const getQuill = (quillIns) => {\n    quill.current = quillIns;\n  };\n  const quillChange = (delta, old, source) => {\n    console.log('quill-change:', delta, old, source);\n    setDelta(JSON.stringify(quill.current.getContents()));\n  };\n  console.log(window, window.quillReactCommercial);\n  const RichTextEditor = window.quillReactCommercial;\n\n  return (\n    <div className=\"App\">\n      <RichTextEditor\n        readOnly={false}\n        modules={{\n          table: {},\n          codeHighlight: true,\n          imageHandler: {\n            imgUploadApi: (formData) =>\n              // console.log(apiURL('uploadImg'))\n              request(apiURL('uploadImg'), ajaxFormPostOptions(formData)).then(\n                (response) => response.url,\n              ),\n            uploadFailCB: () => console.error('图片上传失败'),\n          },\n        }}\n        getQuill={getQuill}\n        content={\n          // 初始化笔记内容，而不能直接使用activeNote.content，因为当更新或保存会重新渲染导致内容重置到保存时刻，光标变到开头\n          initContent\n        }\n        onChange={quillChange}\n        onFocus={(arg) => {}}\n        title={{ placeholder: 'Title', onChange: (title) => setTitle(title), value: title }}\n        style={{ background: '#eee', height: 600 }}\n      />\n      <div style={{ height: 200 }}>{delta}</div>\n    </div>\n  );\n};\nconst domContainer = document.querySelector('#root');\nconst root = ReactDOM.createRoot(domContainer);\nroot.render(<App />);\n"],"mappings":";;;;;;;;AAAA,IAAMA,GAAG,GAAG,SAANA,GAAG,GAAS;EAChB,IAAMC,KAAK,GAAGC,KAAK,CAACC,MAAM,CAAC,CAAC,CAAC,CAAC;EAC9B,sBAA0BD,KAAK,CAACE,QAAQ,CAAC,EAAE,CAAC;IAAA;IAArCC,KAAK;IAAEC,QAAQ;EACtB,uBAA0BJ,KAAK,CAACE,QAAQ,CAAC,MAAM,CAAC;IAAA;IAAzCG,KAAK;IAAEC,QAAQ;EACtB,IAAMC,WAAW,GAAG,EAAE;EACtB,IAAMC,QAAQ,GAAG,SAAXA,QAAQ,CAAIC,QAAQ,EAAK;IAC7BV,KAAK,CAACW,OAAO,GAAGD,QAAQ;EAC1B,CAAC;EACD,IAAME,WAAW,GAAG,SAAdA,WAAW,CAAIR,KAAK,EAAES,GAAG,EAAEC,MAAM,EAAK;IAC1CC,OAAO,CAACC,GAAG,CAAC,eAAe,EAAEZ,KAAK,EAAES,GAAG,EAAEC,MAAM,CAAC;IAChDT,QAAQ,CAACY,IAAI,CAACC,SAAS,CAAClB,KAAK,CAACW,OAAO,CAACQ,WAAW,EAAE,CAAC,CAAC;EACvD,CAAC;EACDJ,OAAO,CAACC,GAAG,CAACI,MAAM,EAAEA,MAAM,CAACC,oBAAoB,CAAC;EAChD,IAAMC,cAAc,GAAGF,MAAM,CAACC,oBAAoB;EAElD,oBACE;IAAK,SAAS,EAAC;EAAK,gBAClB,oBAAC,cAAc;IACb,QAAQ,EAAE,KAAM;IAChB,OAAO,EAAE;MACPE,KAAK,EAAE,CAAC,CAAC;MACTC,aAAa,EAAE,IAAI;MACnBC,YAAY,EAAE;QACZC,YAAY,EAAE,sBAACC,QAAQ;UAAA;YACrB;YACAC,OAAO,CAACC,MAAM,CAAC,WAAW,CAAC,EAAEC,mBAAmB,CAACH,QAAQ,CAAC,CAAC,CAACI,IAAI,CAC9D,UAACC,QAAQ;cAAA,OAAKA,QAAQ,CAACC,GAAG;YAAA;UAC3B;QAAA;QACHC,YAAY,EAAE;UAAA,OAAMnB,OAAO,CAACoB,KAAK,CAAC,QAAQ,CAAC;QAAA;MAC7C;IACF,CAAE;IACF,QAAQ,EAAE1B,QAAS;IACnB,OAAO;IACL;IACAD,WACD;IACD,QAAQ,EAAEI,WAAY;IACtB,OAAO,EAAE,iBAACwB,GAAG,EAAK,CAAC,CAAE;IACrB,KAAK,EAAE;MAAEC,WAAW,EAAE,OAAO;MAAEC,QAAQ,EAAE,kBAAChC,KAAK;QAAA,OAAKC,QAAQ,CAACD,KAAK,CAAC;MAAA;MAAEiC,KAAK,EAAEjC;IAAM,CAAE;IACpF,KAAK,EAAE;MAAEkC,UAAU,EAAE,MAAM;MAAEC,MAAM,EAAE;IAAI;EAAE,EAC3C,eACF;IAAK,KAAK,EAAE;MAAEA,MAAM,EAAE;IAAI;EAAE,GAAErC,KAAK,CAAO,CACtC;AAEV,CAAC;AACD,IAAMsC,YAAY,GAAGC,QAAQ,CAACC,aAAa,CAAC,OAAO,CAAC;AACpD,IAAMC,IAAI,GAAGC,QAAQ,CAACC,UAAU,CAACL,YAAY,CAAC;AAC9CG,IAAI,CAACG,MAAM,eAAC,oBAAC,GAAG,OAAG,CAAC"}